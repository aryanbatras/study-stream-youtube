import{b as _,o as U,e as W,g as q,t as f,h as Q,i as g,j as $,s as D,k,l as O,d as N,m as B,n as Z,p as L,f as ee,q as te,c as u,r as K,M as T,v as R,a as re,S as A,T as H}from"./index-MKBqMPue.js";import{S as ne}from"./ShinyText-BwsyuJOo.js";var ie=f('<div class="relative w-full h-full"style=aspect-ratio:16/10;background-color:black;position:relative><div id=yt-player-container class="absolute inset-0"style=width:100%;height:100%;position:absolute;top:0;left:0></div><div class="absolute inset-0 flex items-center justify-center"style="background-color:black;z-index:1;transition:opacity 500ms ease;will-change:opacity">'),oe=f('<img alt="video thumbnail"style=max-width:100%;max-height:100%;object-fit:cover;object-position:center;display:block;width:100%;height:100%>'),ae=f('<button style="position:absolute;zIndex:30;background:rgba(255,255,255,0.95);border:none;padding:10px 18px;border-radius:6px;cursor:pointer;transform:translateY(0)">â–¶ Play'),se=f('<div class="absolute inset-0 flex items-center justify-center text-white"style=zIndex:40>Failed to load player');function le(r){let t;const[m,d]=_(!1),[h,a]=_(!1),[w,v]=_(!1),[x,y]=_(!1);let l=null,I=()=>r.videoId;function E(){return window.__YT_API_PROMISE||(window.__YT_API_PROMISE=new Promise((n,i)=>{if(window.YT&&window.YT.Player)return n(window.YT);if(!document.getElementById("youtube-iframe-api")){const c=document.createElement("script");c.id="youtube-iframe-api",c.src="https://www.youtube.com/iframe_api",c.async=!0,c.onerror=()=>i(new Error("YouTube API failed to load")),document.head.appendChild(c)}const o=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{o&&o(),n(window.YT)},setTimeout(()=>{window.YT&&window.YT.Player||n(window.YT)},8e3)})),window.__YT_API_PROMISE}function C(n){const i=`https://i.ytimg.com/vi/${n}/hqdefault.jpg`,e=new Image;return e.src=i,e.onload=()=>a(!0),e.onerror=()=>a(!1),i}async function s(n){if(!(!n||!t)){d(!1),v(!1),y(!1),C(n);try{const i=await E();if(!(i&&i.Player)){const e=document.createElement("iframe"),o=`https://www.youtube.com/embed/${n}?autoplay=1&mute=1&controls=0&rel=0&modestbranding=1&playsinline=1&origin=${window.location.origin}&enablejsapi=1`;e.setAttribute("src",o),e.setAttribute("allow","autoplay; encrypted-media; picture-in-picture"),e.setAttribute("allowfullscreen","true"),e.style.width="100%",e.style.height="100%",e.style.border="0",e.style.opacity="0",e.style.transition="opacity 600ms ease",e.style.willChange="opacity, transform",t.innerHTML="",t.appendChild(e),e.onload=()=>{setTimeout(()=>{e.style.opacity="1",setTimeout(()=>v(!0),250)},600)};return}if(l&&typeof l.destroy=="function"){try{l.destroy()}catch{}l=null}l=new i.Player(t,{videoId:n,playerVars:{autoplay:1,mute:1,controls:0,modestbranding:1,rel:0,playsinline:1,origin:window.location.origin,enablejsapi:1,iv_load_policy:3},events:{onReady:e=>{const o=l.getIframe();o&&(o.style.opacity="0",o.style.transition="opacity 600ms ease",o.style.willChange="opacity, transform",o.style.background="black",o.setAttribute("allow","autoplay; encrypted-media; picture-in-picture"));try{const c=e.target.playVideo();c&&typeof c.catch=="function"&&c.catch(b=>{y(!0)})}catch{y(!0)}},onStateChange:e=>{const o=e.data;o===i.PlayerState.PLAYING?setTimeout(()=>{const c=l.getIframe();c&&(c.style.opacity="1"),setTimeout(()=>v(!0),200)},250):o===i.PlayerState.BUFFERING||i.PlayerState.ENDED},onError:e=>{console.error("YT player error:",e),d(!0)}}})}catch(i){console.error("YouTube init error:",i),d(!0)}}}U(()=>s(I())),W(()=>{if(r.videoId){const n=r.videoId;if(l&&typeof l.destroy=="function"){try{l.destroy()}catch{}l=null}a(!1),v(!1),y(!1),s(n)}}),q(()=>{try{l&&typeof l.destroy=="function"&&l.destroy()}catch{}l=null});const p=r.videoId?`https://i.ytimg.com/vi/${r.videoId}/hqdefault.jpg`:"";return(()=>{var n=ie(),i=n.firstChild,e=i.nextSibling;return Q(o=>t=o,i),g(e,(()=>{var o=$(()=>!!r.videoId);return()=>o()&&(()=>{var c=oe();return c.addEventListener("error",()=>a(!1)),c.addEventListener("load",()=>a(!0)),D(c,"src",p),c})()})(),null),g(e,(()=>{var o=$(()=>!!(x()&&!w()));return()=>o()&&(()=>{var c=ae();return c.$$click=()=>{try{if(l&&typeof l.playVideo=="function")l.playVideo(),y(!1);else{const b=t.querySelector("iframe");b&&(b.contentWindow&&b.contentWindow.postMessage&&b.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*"),b.style.opacity="1",v(!0))}}catch(b){console.warn("Play click failed",b)}},c})()})(),null),g(n,(()=>{var o=$(()=>!!m());return()=>o()&&se()})(),null),k(o=>{var c=w()?"0":"1",b=(w(),"none");return c!==o.e&&O(e,"opacity",o.e=c),b!==o.t&&O(e,"pointerEvents",o.t=b),o},{e:void 0,t:void 0}),n})()}N(["click"]);var ce=f("<svg stroke-width=0>");function de(r,t){const m=B(r.a,t),[d,h]=Z(m,["src"]),[a,w]=_(""),v=L(()=>t.title?`${r.c}<title>${t.title}</title>`:r.c);return W(()=>w(v())),q(()=>{w("")}),(()=>{var x=ce();return ee(x,B({get stroke(){return r.a?.stroke},get color(){return t.color||"currentColor"},get fill(){return t.color||"currentColor"},get style(){return{...t.style,overflow:"visible"}}},h,{get height(){return t.size||"1em"},get width(){return t.size||"1em"},xmlns:"http://www.w3.org/2000/svg",get innerHTML(){return a()}}),!0,!0),g(x,()=>te),x})()}function V(r){return de({a:{viewBox:"0 0 384 512"},c:'<path d="M32 32C32 14.3 46.3 0 64 0h256c17.7 0 32 14.3 32 32s-14.3 32-32 32h-29.5l11.4 148.2c36.7 19.9 65.7 53.2 79.5 94.7l1 3c3.3 9.8 1.6 20.5-4.4 28.8S362.3 352 352 352H32c-10.3 0-19.9-4.9-26-13.3s-7.7-19.1-4.4-28.8l1-3c13.8-41.5 42.8-74.8 79.5-94.7L93.5 64H64c-17.7 0-32-14.3-32-32zm128 352h64v96c0 17.7-14.3 32-32 32s-32-14.3-32-32v-96z"/>'},r)}var ue=f('<div class="w-1 h-1 bg-white rounded-full mr-0.5">'),fe=f("<button>"),pe=f('<div class="absolute inset-0 z-20 pointer-events-none">'),ge=f('<svg class="w-8 h-8 text-gray-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z">'),me=f('<div class="w-full h-full flex items-center justify-center bg-black">');const M=r=>{const{id:t,className:m="",isLive:d=!1,isPinned:h=!1,onPinChange:a}=r,[w,v]=_(!1),x=y=>{y.stopPropagation(),a?.(!h)};return u(T.div,{class:`relative aspect-video bg-black rounded-lg overflow-hidden ${m}`,"data-video-id":t,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),get children(){return[u(K,{when:t,get fallback(){return(()=>{var y=me();return g(y,u(T.div,{class:"w-16 h-16 rounded-full bg-black flex items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},get children(){return ge()}})),y})()},get children(){return u(le,{videoId:t})}}),(()=>{var y=pe();return g(y,u(T.div,{class:"absolute top-1 left-1 bg-red-500 text-white text-[8px] px-1.5 py-0.5 rounded flex items-center pointer-events-auto",initial:{opacity:0,y:-5},get animate(){return{opacity:w()?.75:0,y:w()?0:-5}},transition:{duration:.2},get children(){return[ue(),"LIVE"]}}),null),g(y,u(T.div,{class:"absolute top-1 right-1 flex gap-1 pointer-events-auto",initial:{opacity:0,y:-5},get animate(){return{opacity:w()?1:0,y:w()?0:-5}},transition:{duration:.2},get children(){var l=fe();return l.$$click=x,R(l,`p-1.5 rounded-full ${h?"bg-primary/90":"bg-black/60"} text-white hover:bg-primary transition-all cursor-pointer shadow-md`),D(l,"title",h?"Unpin":"Pin"),g(l,u(V,{class:"w-3 h-3 transition-transform",classList:{"rotate-45":h}})),l}}),null),y})()]}})};N(["click"]);var he=f('<button class=button-with-icon><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 48 48"id=Play class=icon><path d="M12 39c-.549 0-1.095-.15-1.578-.447A3.008 3.008 0 0 1 9 36V12c0-1.041.54-2.007 1.422-2.553a3.014 3.014 0 0 1 2.919-.132l24 12a3.003 3.003 0 0 1 0 5.37l-24 12c-.42.21-.885.315-1.341.315z"fill=#ffffff class="color000000 svgShape"></path></svg><span class=text>Go Live');const ye=()=>u(ve,{get children(){return he()}}),ve=re.div`
  .button-with-icon {
    overflow: hidden;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: 1px solid #d32f2f;
    font-family: "Istok Web", sans-serif;
    letter-spacing: 1px;
    padding: 0 12px;
    text-align: center;
    width: 112px;
    height: 30px;
    font-size: 10px;
    text-transform: uppercase;
    font-weight: normal;
    border-radius: 3px;
    outline: none;
    user-select: none;
    cursor: pointer;
    transform: translateY(0px);
    position: relative;
    box-shadow:
      inset 0 30px 30px -15px rgba(255, 255, 255, 0.1),
      inset 0 0 0 1px rgba(255, 255, 255, 0.3),
      inset 0 1px 20px rgba(0, 0, 0, 0),
      0 3px 0 #d32f2f,
      0 3px 2px rgba(0, 0, 0, 0.2),
      0 5px 10px rgba(0, 0, 0, 0.1),
      0 10px 20px rgba(0, 0, 0, 0.1);
    background: #e53935;
    color: white;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3);
    transition: 150ms all ease-in-out;
  }

  .button-with-icon .icon {
    margin-right: 8px;
    width: 20px;
    height: 20px;
    transition: all 0.5s ease-in-out;
  }

  .button-with-icon:active {
    transform: translateY(3px);
    box-shadow:
      inset 0 16px 2px -15px rgba(0, 0, 0, 0),
      inset 0 0 0 1px rgba(255, 255, 255, 0.15),
      inset 0 1px 20px rgba(0, 0, 0, 0.1),
      0 0 0 #d32f2f,
      0 0 0 2px rgba(255, 255, 255, 0.5),
      0 0 0 rgba(0, 0, 0, 0),
      0 0 0 rgba(0, 0, 0, 0);
  }

  .button-with-icon:hover .text {
    transform: translateX(85px);
  }

  .button-with-icon:hover .icon {
    transform: translate(27px);
    scale: 1.05;
  }

  .text {
    transition: all 0.5s ease-in-out;
  }`,S="yt_clone_cache_",we=600*60*1e3,Y=(...r)=>{console.log("%c[Cache]","color: #4CAF50; font-weight: bold",...r)},F={set:(r,t,m=we)=>{try{const d=new Date,h=d.getTime()+m,a={data:t,expiry:h,timestamp:d.toISOString(),ttl:m/1e3+"s"};return localStorage.setItem(`${S}${r}`,JSON.stringify(a)),Y(`Cached data for key: "${r}" (expires in ${m/1e3}s)`),!0}catch(d){return console.error("Error saving to cache:",d),!1}},get:r=>{try{const t=localStorage.getItem(`${S}${r}`);if(!t)return Y(`Cache miss for key: "${r}" (not found)`),null;const m=JSON.parse(t),d=new Date;if(d.getTime()>m.expiry)return Y(`Cache expired for key: "${r}" (expired at ${new Date(m.expiry).toLocaleTimeString()})`),localStorage.removeItem(`${S}${r}`),null;const a=Math.ceil((m.expiry-d.getTime())/1e3);return Y(`Cache hit for key: "${r}" (expires in ${a}s)`),m.data}catch(t){return console.error("Error reading from cache:",t),null}},remove:r=>{try{return localStorage.removeItem(`${S}${r}`),!0}catch(t){return console.error("Error removing from cache:",t),!1}},clear:()=>{try{return Object.keys(localStorage).forEach(r=>{r.startsWith(S)&&localStorage.removeItem(r)}),!0}catch(r){return console.error("Error clearing cache:",r),!1}}},be={LIVE_VIDEOS:"live_videos"},xe="AIzaSyCme96dbKuwSWqh54Wed8-Rfj2C0r6IDYM",$e="https://www.googleapis.com/youtube/v3",_e=600*60*1e3,Pe=async(r=12)=>{const t=`${be.LIVE_VIDEOS}_${r}`,m=F.get(t);if(m)return m;try{const h=["live study","study with me","live pomodoro"].join("|"),a=await fetch(`${$e}/search?part=snippet&type=video&eventType=live&q=${encodeURIComponent(h)}&maxResults=${r}&key=${xe}`);if(!a.ok)return new Error(`API request failed with status ${a.status}`);const v=(await a.json()).items?.map(x=>x.id.videoId).filter(Boolean)||[];return v.length>0&&F.set(t,v,_e),v}catch(d){throw new Error(`Failed to fetch live videos: ${d.message}`)}};function Ie(){const[r,t]=_({data:[],loading:!1,error:null});return{videos:r,loadLiveVideos:async(d=12)=>{try{t(a=>({...a,loading:!0,error:null}));const h=await Pe(d);t({data:h,loading:!1,error:null})}catch(h){t(a=>({data:a.data,loading:!1,error:h.message||"Failed to load live videos"}))}}}}var Ee=f('<div class="flex justify-between p-16 items-center mb-4">'),Ce=f('<div class="fixed inset-0 z-50 bg-black flex"><div class="absolute top-4 right-4 z-50"></div><div class="w-full h-full">'),Se=f('<div class="text-sm text-gray-500 flex items-center gap-1"> pinned'),ke=f('<button class="btn btn-primary flex items-center gap-2"><span>Focus Mode'),Te=f('<div class="min-w-screen mb-12"><div class="flex justify-between items-center mb-6 px-4"><h2 class="text-2xl font-bold flex items-center gap-3"></h2></div><div class="grid grid-cols-1 sm:grid-cols-2 gap-6 px-4">'),Ae=f('<div class="flex justify-center items-center h-64 bg-black"><span class="loading loading-spinner loading-lg">'),Ye=f('<div class="alert alert-error"><span>Error: '),Le=f('<div class="grid grid-cols-1 sm:grid-cols-2 gap-6 p-4">'),Re=f('<div class="flex justify-center gap-2 mt-6"><button class="btn btn-sm">Previous</button><button class="btn btn-sm">Next'),je=f("<button>"),G=f("<div>");function De(){const{videos:t,loadLiveVideos:m}=Ie(),[d,h]=_({}),[a,w]=_(1),[v,x]=_(!1);U(()=>m(12));const y=(s,p)=>{const n={...d(),[s]:p};h(n),Object.values(n).filter(Boolean).length===0&&x(!1)},l=L(()=>(t().data||[]).slice((a()-1)*4,a()*4)),I=L(()=>Math.ceil((t().data?.length||0)/4)),E=s=>{s>=1&&s<=I()&&w(s)},C=L(()=>Object.values(d()).filter(Boolean).length);return u(A,{className:"min-h-screen flex flex-col justify-around items-center",get children(){return[u(A,{className:"min-w-screen  max-w-4xl mb-6",get children(){return[(()=>{var s=Ee();return g(s,(()=>{var p=$(()=>C()>0);return()=>p()&&[(()=>{var n=Se(),i=n.firstChild;return g(n,u(V,{class:"w-5 h-5"}),i),g(n,C,i),n})(),(()=>{var n=ke();return n.$$click=()=>x(!0),n})()]})()),s})(),$(()=>$(()=>C()>0)()&&(()=>{var s=Te(),p=s.firstChild,n=p.firstChild,i=p.nextSibling;return g(n,u(V,{class:"w-7 h-7 text-purple-600"}),null),g(n,u(H,{animte:!0,children:"Pinned Streams"}),null),g(i,()=>t().data?.filter(e=>d()[e]).map(e=>u(M,{id:e,isPinned:!0,onPinChange:o=>y(e,o),className:"aspect-video col-span-1 sm:col-span-1"}))),s})())]}}),u(A,{className:"w-full p-4 pl-16 pr-16",get children(){return[u(H,{animate:!0,className:"px-8 text-2xl md:text-4xl lg:text-6xl font-serif font-stretch-50% opacity-80",get children(){return u(ne,{children:" Live Streams "})}}),$(()=>$(()=>!!t().loading)()?Ae():$(()=>!!t().error)()?(()=>{var s=Ye(),p=s.firstChild;return p.firstChild,g(p,()=>t().error,null),s})():[(()=>{var s=Le();return g(s,()=>l().map(p=>u(M,{id:p,get isPinned(){return!!d()[p]},onPinChange:n=>y(p,n)}))),s})(),$(()=>$(()=>I()>1)()&&(()=>{var s=Re(),p=s.firstChild,n=p.nextSibling;return p.$$click=()=>E(a()-1),g(s,()=>Array.from({length:I()},(i,e)=>e+1).map(i=>(()=>{var e=je();return e.$$click=()=>E(i),D(e,"key",i),g(e,i),k(()=>R(e,`btn btn-sm ${a()===i?"btn-primary":""}`)),e})()),n),n.$$click=()=>E(a()+1),k(i=>{var e=a()===1,o=a()===I();return e!==i.e&&(p.disabled=i.e=e),o!==i.t&&(n.disabled=i.t=o),i},{e:void 0,t:void 0}),s})())])]}}),u(A,{className:"flex flex-row justify-around gap-4 mt-8 w-full max-w-4xl mb-8",get children(){return u(ye,{})}}),u(K,{get when(){return v()},get children(){var s=Ce(),p=s.firstChild,n=p.nextSibling;return g(n,()=>{const i=t().data?.filter(P=>d()[P])||[],e=i.length,o=()=>e<=1?"grid-cols-1 grid-rows-1":e===2?"grid-cols-2 grid-rows-1":e===3||e===4?"grid-cols-2 grid-rows-2":e===5||e===6?"grid-cols-3 grid-rows-2":"grid-cols-4 grid-rows-2",c=P=>e===3&&P===0||(e===5||e===6)&&P<3?"row-span-2":"",b=()=>e===1?"aspect-auto":"aspect-video";return(()=>{var P=G();return g(P,()=>i.map((z,J)=>(()=>{var j=G();return g(j,u(M,{id:z,isPinned:!0,hideUI:!0,onPinChange:X=>y(z,X),get className(){return`w-full h-full ${b()}`}})),k(()=>R(j,`relative ${c(J)}`)),j})())),k(()=>R(P,`w-full h-full grid ${o()} gap-1 p-1`)),P})()}),s}})]}})}N(["click"]);export{De as default};
