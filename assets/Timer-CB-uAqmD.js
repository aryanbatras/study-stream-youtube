import{b as p,r as P,o as rt,g as h,j as it,t as x,i as r,l as D,c as X,n as at,s as lt,w as dt,e as ct}from"./index-B7SA2SNW.js";import{d as pt,e as ut}from"./index-Dh_VBLhF.js";var gt=x("<div style=position:fixed;bottom:16px;right:16px;z-index:30>"),ft=x('<button style="background:rgba(255,255,255,0.9);backdrop-filter:blur(10px);border-radius:999px;padding:12px 16px;display:flex;align-items:center;gap:8px;color:#111;/* ðŸ’› TEXT VISIBLE */ box-shadow:0 4px 10px rgba(0,0,0,0.15);"><div style="width:12px;height:12px;border-radius:999px;background:#10b981;animation:pulse 1.5s infinite;"></div><span style=font-weight:600;color:#111>'),xt=x('<div style="width:260px;background:rgba(255,255,255,0.95);backdrop-filter:blur(16px);border-radius:12px;padding:16px;color:#111;/* ðŸ’› ALL TEXT DARK */ box-shadow:0 8px 20px rgba(0,0,0,0.15);"><div style=display:flex;justify-content:space-between;margin-bottom:16px;color:#111><h3 style=font-size:16px;font-weight:700;color:#111>Focus Timer</h3><button style=font-size:18px;color:#111>Ã—</button></div><div style=text-align:center;margin-bottom:24px;color:#111><div style=font-size:40px;font-weight:800;margin-bottom:8px;color:#111></div><div style=font-size:14px;color:#333;gap:8px> mins studied today</div></div><div style=display:flex;justify-content:center;margin-bottom:12px><button style=width:56px;height:56px;border-radius:999px;background:#10b981;color:white;display:flex;justify-content:center;align-items:center;font-size:20px;></button></div><button style="width:100%;padding:10px 14px;background:#ecfdf5;border-radius:6px;font-size:14px;color:#111;margin-bottom:10px;">Complete session</button><button style="width:100%;padding:8px 12px;background:#f3f4f6;border-radius:6px;font-size:14px;color:#111;">'),bt=x('<div style=margin-top:14px;color:#111><h4 style=font-weight:600;margin-bottom:8px;color:#111>Last 30 Days</h4><div style=font-size:14px;color:#333> mins total</div><div style="display:grid;grid-template-columns:repeat(6, 1fr);gap:6px;">'),mt=x("<div>");const k="study-timer-v3";function ht(){const[d,b]=p(0),[m,$]=p(!1),[B,I]=p(!1),[C,G]=p(!1),[E,T]=p([]),[i,z]=p({});let c;const a=t=>String(t).padStart(2,"0"),M=()=>{const t=new Date;return`${t.getFullYear()}-${a(t.getMonth()+1)}-${a(t.getDate())}`},N=t=>{const e=Math.floor(t/3600),n=Math.floor(t%3600/60),s=t%60;return e>0?`${e}:${a(n)}:${a(s)}`:`${n}:${a(s)}`},V=t=>{const e=[],n=new Date;for(let s=0;s<t;s++){const o=new Date;o.setDate(n.getDate()-s),e.push(`${o.getFullYear()}-${a(o.getMonth()+1)}-${a(o.getDate())}`)}return e.reverse()},q=P(()=>V(30)),Q=P(()=>{const t=new Date,e=new Date;return e.setDate(t.getDate()-30),Object.entries(i()).filter(([s])=>{const[o,v,y]=s.split("-");return new Date(Number(o),Number(v)-1,Number(y))>e}).reduce((s,[,o])=>s+o,0)}),j=()=>{c&&clearInterval(c),c=setInterval(()=>b(t=>t+1),1e3)},A=()=>{c&&clearInterval(c),c=void 0},U=()=>{$(!0),j(),l({lastStart:Date.now()})},F=()=>{$(!1),A(),l({lastStart:null})},W=()=>m()?F():U(),Z=()=>{if(d()===0)return;const t=d(),e=Math.floor(t/60),n=M();T(s=>[...s,t]),z(s=>({...s,[n]:(s[n]||0)+e})),F(),b(0),l()},l=(t={})=>{const e={seconds:d(),running:m(),lastStart:t.lastStart??null,sessions:E(),daily:i(),...t};localStorage.setItem(k,JSON.stringify(e))};return rt(()=>{const t=localStorage.getItem(k);if(t)try{const e=JSON.parse(t);if(e.running&&e.lastStart){const n=Math.floor((Date.now()-e.lastStart)/1e3);b((e.seconds||0)+n),$(!0),j()}else b(e.seconds||0),$(!1);T(e.sessions||[]),z(e.daily||{})}catch{localStorage.removeItem(k)}}),h(()=>l({seconds:d()})),h(()=>l({running:m()})),h(()=>l({sessions:E()})),h(()=>l({daily:i()})),it(()=>A()),(()=>{var t=gt();return r(t,(()=>{var e=D(()=>!B());return()=>e()?(()=>{var n=ft(),s=n.firstChild,o=s.nextSibling;return n.$$click=()=>I(!0),r(o,()=>N(d())),n})():(()=>{var n=xt(),s=n.firstChild,o=s.firstChild,v=o.nextSibling,y=s.nextSibling,S=y.firstChild,H=S.nextSibling,tt=H.firstChild,L=y.nextSibling,O=L.firstChild,R=L.nextSibling,K=R.nextSibling;return v.$$click=()=>I(!1),r(S,()=>N(d())),r(H,()=>i()[M()]||0,tt),O.$$click=W,r(O,(()=>{var u=D(()=>!!m());return()=>u()?X(pt,{}):X(ut,{})})()),R.$$click=Z,K.$$click=()=>G(u=>!u),r(K,()=>C()?"Hide History":"Show History"),r(n,(()=>{var u=D(()=>!!C());return()=>u()&&(()=>{var Y=bt(),et=Y.firstChild,_=et.nextSibling,st=_.firstChild,nt=_.nextSibling;return r(_,Q,st),r(nt,()=>q().map(g=>(()=>{var w=mt();return at(f=>{var J=`${g} â€” ${i()[g]||0} min`,ot=`
                                            width: 30px;
                                            height: 30px;
                                            border-radius: 6px;
                                            background: ${i()[g]>60?"#065f46":i()[g]>30?"#10b981":i()[g]>0?"#a7f3d0":"#f3f4f6"};
                                        `;return J!==f.e&&lt(w,"title",f.e=J),f.t=dt(w,ot,f.t),f},{e:void 0,t:void 0}),w})())),Y})()})(),null),n})()})()),t})()}ct(["click"]);export{ht as default};
